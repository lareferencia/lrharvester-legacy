<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright (c) 2013 
  All rights reserved. This program and the accompanying materials
  are made available under the terms of the GNU Public License v2.0
  which accompanies this distribution, and is available at
  http://www.gnu.org/licenses/old-licenses/gpl-2.0.html
  
  Contributors:
      Lautaro Matas (lmatas@gmail.com) - Desarrollo e implementación
      Emiliano Marmonti(emarmonti@gmail.com) - Coordinación del componente III
  
  Este software fue desarrollado en el marco de la consultoría "Desarrollo e implementación de las soluciones - Prueba piloto del Componente III -Desarrollador para las herramientas de back-end" del proyecto “Estrategia Regional y Marco de Interoperabilidad y Gestión para una Red Federada Latinoamericana de Repositorios Institucionales de Documentación Científica” financiado por Banco Interamericano de Desarrollo (BID) y ejecutado por la Cooperación Latino Americana de Redes Avanzadas, CLARA.
-->
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xmlns:p="http://www.springframework.org/schema/p" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:task="http://www.springframework.org/schema/task"
	xmlns:solr="http://www.springframework.org/schema/data/solr"
	
	
	
	xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd 	
		http://www.springframework.org/schema/data/solr 
		http://www.springframework.org/schema/data/solr/spring-solr.xsd">


	<!--  import resource="file:${validator.path}/rules-context.xml"/>
	<import resource="file:${validator.path}/fields-context.xml"/>
	<import resource="file:${validator.path}/validators-context.xml"/>
	<import resource="file:${validator.path}/transformers-context.xml"/-->	
	
	
	<solr:repositories base-package="org.lareferencia.backend.repositories" solr-template-ref="validationSolrTemplate" multicore-support="true"/>
	
	<!-- Configures HTTP Solr server -->
    <!-- solr:solr-server id="solrServer" url="${vstats.solr.server}"/-->
    <solr:solr-client id="solrClient"  url="${vstats.solr.server}"/>
   
    <!-- Configures Solr template -->
    <bean id="validationSolrTemplate" class="org.springframework.data.solr.core.SolrTemplate">
        <constructor-arg index="0" ref="solrClient"/>
        <constructor-arg index="1"><value>${vstats.solr.core}</value></constructor-arg>
    </bean>
	
	<!--  import resource="file:${validator.path}/validator-2.0-context.xml"/ -->
	
	 <bean id="ruleSerializer" class="org.lareferencia.backend.validation.RuleSerializer">
        <property name="validatorPrototypes">
        	<list>
        		<bean class="org.lareferencia.backend.validation.validator.RegexFieldContentValidatorRule"></bean>
        		<bean class="org.lareferencia.backend.validation.validator.ContentLengthFieldContentValidatorRule"></bean>
        		<bean class="org.lareferencia.backend.validation.validator.ControlledValueFieldContentValidatorRule"></bean>
        		<bean class="org.lareferencia.backend.validation.validator.LargeControlledValueFieldContentValidatorRule"></bean>
        		<bean class="org.lareferencia.backend.validation.validator.FieldExpressionValidatorRule"></bean>  			  		
        	</list>
        </property>
    </bean>
	
	

</beans>
